---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import ProjectCard from "../components/ProjectCard.astro";
import PostRow from "../components/PostRow.astro";

const featuredProjects = (await getCollection("projects"))
	.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
	.slice(0, 2);

const latestPosts = (await getCollection("blog"))
	.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
	.slice(0, 3);
---

<Layout title="Home | Noah Qin">
	<section class="py-12 md:py-20">
		<h1
			class="text-4xl md:text-6xl font-extrabold tracking-tight text-zinc-900 dark:text-white mb-6"
		>
			Hi, I'm <span class="text-indigo-600 dark:text-indigo-400"
				>Noah Qin</span
			>.
		</h1>
		<p
			class="text-lg md:text-xl text-zinc-600 dark:text-zinc-400 max-w-2xl leading-relaxed"
		>
			I'm a high schooler from China building <span
				class="text-zinc-900 dark:text-zinc-200 font-medium"
				>iOS apps</span
			> and researching <span
				class="text-zinc-900 dark:text-zinc-200 font-medium"
				>AI agents</span
			>. I write about engineering, design, and my journey in comp sci.
		</p>
		<div class="flex gap-4 pt-6">
			<a
				href="/projects"
				class="px-4 py-2 bg-zinc-900 text-white rounded-lg font-medium hover:bg-zinc-800 transition-colors"
			>
				View Projects
			</a>
			<a
				href="/blog"
				class="px-4 py-2 bg-zinc-100 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-200 rounded-lg font-medium hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors"
			>
				Read Essays
			</a>
		</div>
	</section>

	<!-- Featured Projects -->
	<section class="space-y-8 mb-20">
		<div class="flex items-center justify-between">
			<h2 class="text-2xl font-bold text-zinc-900 dark:text-zinc-100">
				Featured Projects
			</h2>
			<a
				href="/projects"
				class="text-sm font-medium text-zinc-500 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"
				>View All &rarr;</a
			>
		</div>
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
			{
				featuredProjects.map((project) => (
					<ProjectCard project={project} />
				))
			}
		</div>
	</section>

	<!-- Latest Essays -->
	<section class="space-y-8">
		<div class="flex items-center justify-between">
			<h2 class="text-2xl font-bold text-zinc-900 dark:text-zinc-100">
				Latest Essays
			</h2>
			<a
				href="/blog"
				class="text-sm font-medium text-zinc-500 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"
				>Read Blog &rarr;</a
			>
		</div>
		<div class="flex flex-col gap-2">
			{latestPosts.map((post) => <PostRow post={post} />)}
		</div>
	</section>
</Layout>
