---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const allProjects = await getCollection("projects");
const sortedProjects = allProjects.sort(
    (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);

// Separate into categories for easier browsing if needed in future,
// but for now we list all with a nice badge.
---

<Layout title="Projects | Portfolio">
    <div class="space-y-8">
        <div class="border-b border-zinc-800 pb-8">
            <h1 class="text-3xl font-bold tracking-tight text-white mb-4">
                Projects
            </h1>
            <p class="text-zinc-400 max-w-2xl">
                A collection of things I've built, ranging from iOS apps to AI
                research papers.
            </p>
        </div>

        <div class="grid gap-6 md:grid-cols-2">
            {
                sortedProjects.map((project) => (
                    <a
                        href={`/projects/${project.slug}`}
                        class="group relative flex flex-col gap-3 p-6 rounded-2xl bg-zinc-900/40 border border-zinc-800/50 hover:bg-zinc-900 hover:border-zinc-700 transition-all duration-300"
                    >
                        <div class="flex items-center justify-between mb-2">
                            <span
                                class={`px-3 py-1 rounded-full text-xs font-medium border ${
                                    project.data.type === "app"
                                        ? "bg-blue-500/10 text-blue-400 border-blue-500/20"
                                        : project.data.type === "research"
                                          ? "bg-purple-500/10 text-purple-400 border-purple-500/20"
                                          : "bg-emerald-500/10 text-emerald-400 border-emerald-500/20"
                                }`}
                            >
                                {project.data.type === "app"
                                    ? "iOS App"
                                    : project.data.type === "research"
                                      ? "Research"
                                      : "Project"}
                            </span>
                            {project.data.stats && (
                                <span class="text-xs text-zinc-500 font-mono flex items-center gap-1">
                                    {project.data.stats}
                                </span>
                            )}
                        </div>

                        <h2 class="text-xl font-bold text-zinc-100 group-hover:text-indigo-400 transition-colors">
                            {project.data.title}
                        </h2>

                        <p class="text-sm text-zinc-400 line-clamp-2">
                            {project.data.description}
                        </p>

                        <div class="flex flex-wrap gap-2 mt-auto pt-4">
                            {project.data.tags.map((tag) => (
                                <span class="text-xs text-zinc-500 font-mono">
                                    #{tag}
                                </span>
                            ))}
                        </div>
                    </a>
                ))
            }
        </div>
    </div>
</Layout>
