---
import type { CollectionEntry } from "astro:content";

interface Props {
    project: CollectionEntry<"projects">;
}

const { project } = Astro.props;
---

<div
    class="group relative flex flex-col gap-3 p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)] hover:border-[var(--color-primary)] transition-all duration-300 shadow-sm hover:shadow-xl hover:-translate-y-1 glass-effect overflow-hidden"
>
    <!-- Card Background Gradient Interaction -->
    <div
        class="absolute inset-0 bg-gradient-to-br from-transparent to-[var(--color-primary)]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"
    >
    </div>
    <a
        href={`/projects/${project.slug}`}
        class="absolute inset-0 z-0 rounded-2xl"
        aria-label={project.data.title}></a>

    {
        project.data.image && (
            <div class="relative z-10 w-full mb-4 rounded-xl overflow-hidden aspect-video border border-[var(--color-border)]">
                <img
                    src={project.data.image}
                    alt={project.data.title}
                    class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                    loading="lazy"
                />
            </div>
        )
    }

    <div
        class="relative z-10 pointer-events-none flex items-center justify-between mb-2"
    >
        <span
            class={`px-3 py-1 rounded-full text-xs font-medium border ${
                project.data.type === "app"
                    ? "bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-500/10 dark:text-blue-400 dark:border-blue-500/20"
                    : project.data.type === "research"
                      ? "bg-purple-50 text-purple-600 border-purple-200 dark:bg-purple-500/10 dark:text-purple-400 dark:border-purple-500/20"
                      : "bg-emerald-50 text-emerald-600 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20"
            }`}
        >
            {
                project.data.type === "app"
                    ? "iOS App"
                    : project.data.type === "research"
                      ? "Research"
                      : "Project"
            }
        </span>
        {
            project.data.stats && (
                <span class="text-xs text-[var(--color-text-muted)] font-mono flex items-center gap-1">
                    {project.data.stats}
                </span>
            )
        }
    </div>

    <h2
        class="relative z-10 pointer-events-none text-xl font-bold text-[var(--color-text-main)] group-hover:text-[var(--color-primary)] transition-colors"
    >
        {project.data.title}
    </h2>

    <p
        class="relative z-10 pointer-events-none text-sm text-[var(--color-text-muted)] line-clamp-2"
    >
        {project.data.description}
    </p>

    <div
        class="relative z-10 flex flex-wrap gap-2 mt-auto pt-4 pointer-events-auto"
    >
        {
            project.data.tags.map((tag) => (
                <a
                    href={`/tags/${tag}`}
                    class="text-xs text-[var(--color-text-muted)] font-mono hover:text-[var(--color-primary)] transition-colors relative z-20"
                >
                    #{tag}
                </a>
            ))
        }
    </div>
</div>
